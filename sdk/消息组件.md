# æ¶ˆæ¯ç»„ä»¶
## æ¶ˆæ¯ç»„ä»¶
### æ¶ˆæ¯ç»„ä»¶æ˜¯ä»€ä¹ˆ
èªæ˜Žçš„ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œå½“ä½ éœ€è¦å‘é€å›¾æ–‡çš„æ—¶å€™
```python
await bot.send(event,["æˆ‘æµ‹ä½ çš„ç ",Image(file="test.png")])
```
é™¤äº†eventï¼Œè¿˜éœ€è¦ä¸€ä¸ªMessageChain(å®žé™…ä¸Šæ˜¯åˆ—è¡¨)ï¼Œè¿™ä¸ªåˆ—è¡¨ä¸­åŒ…å«å¤æ•°ä¸ªã€æ¶ˆæ¯ç»„ä»¶ã€‘ï¼Œå³Textå’ŒImageï¼Œè¿™å…¶å®žå°±ç›¸å½“äºŽä½ åœ¨ç¾¤é‡Œå‘`æˆ‘æµ‹ä½ çš„ç [å›¾ç‰‡]`ã€‚

å…³äºŽæœ‰å“ªäº›å…ƒç´ å¯ç”¨ï¼Œä¸‹é¢ä¼šå±•ç¤º
### æ¶ˆæ¯é“¾ä¸èƒ½æ€Žä¹ˆç”¨
å°±åƒä½ ä¸èƒ½åœ¨ç¾¤é‡Œå°†è¯­éŸ³å’Œæ–‡æœ¬å‘é€åˆ°åŒä¸€æ¡æ¶ˆæ¯ä¸­ä¸€æ ·ï¼Œbotä¹Ÿä¸èƒ½æŠŠæœ¬æ¥å°±ä¸èƒ½ä¸€èµ·å‘é€çš„å…ƒç´ æ”¾åœ¨åŒä¸€ä¸ªæ¶ˆæ¯é“¾ã€‚

åœ¨åªæœ‰ä¸€ä¸ªmessage_componentsæ—¶å¯ä»¥ä¸ç”¨[]æŠŠã€æ¶ˆæ¯ç»„ä»¶ã€‘æ‹¬èµ·æ¥ã€‚
```python
await bot.send(event,Image(file="test.png"))
```
## å¯ä¾›ä½¿ç”¨çš„æ¶ˆæ¯ç»„ä»¶
### æ–‡ä»¶
```python
class File(MessageComponent):
    comp_type: str = "file"
    file: str = Field(description="æ–‡ä»¶è·¯å¾„")
    def __init__(self, **data):
        super().__init__(**data)
        if self.file and not (
                self.file.startswith("file://")
                or self.file.startswith("base64://")
        ):
            # å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„å¹¶æ·»åŠ  file:// å‰ç¼€
            abs_path = os.path.abspath(self.file).replace("\\", "/")
            self.file = f"file://{abs_path}"
```
ç”¨ä¾‹
```yaml
await bot.send(event,File(file=path))
```
### æ–‡æœ¬
```
class Text(MessageComponent):
    comp_type: str = "text"
    text: str = Field(description="çº¯æ–‡æœ¬")

    def __init__(self, text: str) -> None:
        BaseModel.__init__(self, text=text)

    def to_cqcode(self) -> str:
        return self.text

```
```yaml
await bot.send(event,Text("ä½ å¥½"))
æˆ–è€…
await bot.send(event,"ä½ å¥½")
```
### QQè¡¨æƒ…
```
class Face(MessageComponent):
    comp_type: str = "face"
    id: str = Field(description="QQ è¡¨æƒ… ID")

    def __init__(self, id: int | str) -> None:
        BaseModel.__init__(self, id=str(id))
```
ç”¨ä¾‹
```yaml
await bot.send(event,Face(id=è¡¨æƒ…id))
```
## å›¾ç‰‡
```
class Image(MessageComponent):
    comp_type: str = "image"
    file: str


    def __init__(self, **data):
        super().__init__(**data)
        if self.file and not (
            self.file.startswith("http://")
            or self.file.startswith("file://")
            or self.file.startswith("base64://")
            or self.file.startswith("https://")
        ):
            # å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„å¹¶æ·»åŠ  file:// å‰ç¼€
            abs_path = os.path.abspath(self.file).replace("\\", "/")
            self.file = f"file://{abs_path}"
```
ç”¨ä¾‹
```
await bot.send(event,Image(file=path)) #å¯ä»¥ä¼ url,base64,è·¯å¾„
```
### è¯­éŸ³
```
class Record(MessageComponent):
    comp_type: str = "record"
    file: str = Field(description="è¯­éŸ³æ–‡ä»¶è·¯å¾„")
    url: Annotated[Optional[str], OnlySend] = Field(default="",description="è¯­éŸ³ URL")

    def __init__(self, **data):
        super().__init__(**data)
        if self.file and not (
            self.file.startswith("http://")
            or self.file.startswith("file://")
            or self.file.startswith("base64://")
            or self.file.startswith("https://")
        ):
            # å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„å¹¶æ·»åŠ  file:// å‰ç¼€
            abs_path = os.path.abspath(self.file).replace("\\", "/")
            self.file = f"file://{abs_path}"
```
ç”¨ä¾‹
```yaml
await bot.send(event,Record(file=path)) #å¯ä»¥ä¼ url,base64,è·¯å¾„
```
### è§†é¢‘
```

class Video(MessageComponent):
    comp_type: str = "video"
    file: Optional[str] = Field(description="è§†é¢‘æ–‡ä»¶è·¯å¾„")
    url: Annotated[Optional[str], OnlyReceive] = Field(description="è§†é¢‘ URL")

```
```
await bot.send(event,Video(file=path)) #è·¯å¾„
```
### è‰¾ç‰¹
```
class At(MessageComponent):
    comp_type: str = "at"
    qq: int = Field(description="@çš„ QQ å·ï¼Œall è¡¨ç¤ºå…¨ä½“æˆå‘˜")

    def __init__(self, qq: int) -> None:
        BaseModel.__init__(self, qq=qq)
```
```
await bot.send(event,At(qq=qqå·))
```
### rps
```
class Rps(MessageComponent):
    comp_type: str = "rps"
```

### Dice
```
class Dice(MessageComponent):
    comp_type: str = "dice"
```
### shake
```
class Shake(MessageComponent):
    comp_type: str = "shake"
```
### poke
```
class Poke(MessageComponent):
    comp_type: str = "poke"
    type: int = Field(description="ç±»åž‹ï¼Œè§ Mirai çš„ PokeMessage ç±»")
    id: int = Field(description="ID")
    name: Annotated[Optional[str], OnlyReceive] = Field(description="è¡¨æƒ…å")
```
### Anonymous
```
class Anonymous(MessageComponent):
    comp_type: str = "anonymous"
    ignore: Annotated[Optional[bool], OnlySend] = Field(
        default=None, description="å¯é€‰ï¼Œè¡¨ç¤ºæ— æ³•åŒ¿åæ—¶æ˜¯å¦ç»§ç»­å‘é€"
    )
```
### åˆ†äº«
```
class Share(MessageComponent):
    comp_type: str = "share"
    url: str = Field(description="URL")
    title: str = Field(description="æ ‡é¢˜")
    content: Optional[str] = Field(description="å‘é€æ—¶å¯é€‰ï¼Œå†…å®¹æè¿°")
    image: Optional[str] = Field(description="å‘é€æ—¶å¯é€‰ï¼Œå›¾ç‰‡ URL")

```
### è”ç³»äºº
```
class Contact(MessageComponent):
    comp_type: str = "contact"
    type: Literal["qq", "group"] = Field(description="æŽ¨èç±»åž‹")
    id: str = Field(description="è¢«æŽ¨èäººçš„ QQ å·æˆ–ç¾¤å·")

```
### ç»çº¬åº¦
```
class Location(MessageComponent):
    comp_type: str = "location"
    lat: str = Field(description="çº¬åº¦")
    lon: str = Field(description="ç»åº¦")
    title: Optional[str] = Field(description="å‘é€æ—¶å¯é€‰ï¼Œæ ‡é¢˜")
    content: Optional[str] = Field(description="å‘é€æ—¶å¯é€‰ï¼Œå†…å®¹æè¿°")
```
### éŸ³ä¹å¡ç‰‡
```
class Music(MessageComponent):
    comp_type: str = "music"
    type: str
    id: int
```
### å¡ç‰‡
```
class Card(MessageComponent):
    comp_type: str = "music"
    type: str="custom"
    url: str="https://music.qq.com"
    audio: str = Field(description="éŸ³é¢‘url")
    title: str= Field(description="éŸ³ä¹æ ‡é¢˜")
    image: str= Field(description="éŸ³ä¹å°é¢url")
```
### å¼•ç”¨å›žå¤
```
class Reply(MessageComponent):
    comp_type: str = "reply"
    id: int = Field(description="å›žå¤æ—¶å¼•ç”¨çš„æ¶ˆæ¯ ID")
```
### èŠå¤©è®°å½•
```
class Forward(MessageComponent):
    comp_type: str = "forward"
    id: Annotated[str, OnlyReceive] = Field(description="åˆå¹¶è½¬å‘ ID")

    def __init__(self, id: str) -> None:
        BaseModel.__init__(self, id=id)

ç”¨è¿™ä¸ªðŸ‘‡
class Node(MessageComponent):
    comp_type: str = "node"
    id: str = Field(default="",description="è½¬å‘çš„æ¶ˆæ¯ ID")
    user_id: str = Field(default="",description="å‘é€è€… QQ å·")
    nickname: str = Field(default="",description="å‘é€è€…æ˜µç§°")
    content: str | list[MessageComponent] = Field(description="æ¶ˆæ¯å†…å®¹")

```
### xml
```
class Xml(MessageComponent):
    comp_type: str = "xml"
    data: str = Field(description="XML å†…å®¹")

    def __init__(self, data: str) -> None:
        BaseModel.__init__(self, data=data)
```
### json
```
class Json(MessageComponent):
    comp_type: str = "json"
    data: str = Field(description="JSON å†…å®¹")

    def __init__(self, data: str) -> None:
        BaseModel.__init__(self, data=data)

```
```
__all__ = [
    "Text",
    "Face",
    "Image",
    "Record",
    "Video",
    "At",
    "Rps",
    "Dice",
    "Shake",
    "Poke",
    "Anonymous",
    "Share",
    "Contact",
    "Location",
    "Music",
    "Reply",
    "Forward",
    "Node",
    "Xml",
]

```